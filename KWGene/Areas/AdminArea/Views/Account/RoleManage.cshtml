@model List<GeneModel.WF_Role>
@{
    ViewBag.Title = "UserList";
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <link href="~/Content/manage/admin.css" rel="stylesheet" />
    <link href="~/Content/manage/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="~/scripts/manage/DataTables-1.10.13/media/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <script src="~/scripts/jquery-1.10.2.min.js"></script>
    <script src="~/scripts/bootstrap.min.js"></script>
    <script src="~/scripts/manage/DataTables-1.10.13/media/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript">
        /* /全选 功能   */
        function checkAll() {
            var $ck = $("#example [name='checkbox']");
            var $c1 = $("#example [name='checkbox0']");
            for (var i = 0; i < $ck.length; i++) {
                if ($c1[0].checked) {
                    $($ck[i]).prop("checked", true);
                }
                else {
                    $($ck[i]).prop("checked", false);
                }
            }
        }
        //批量删除方法
        function deleteall() {
            var $ck = $("#example [name='checkbox']");
            var xe = []; var n = 0;
            var f = false;
            for (var i = 0; i < $ck.length; i++) {
                if ($ck[i].checked) {
                    xe.push($($ck[i]).val());
                    f = true;
                    n++;
                }
            }
            if (!f) {
                alert("请勾选要删除的条目"); return;
            }
            else if (confirm("确定要删除选中的" + n + "条记录么？")) {
                $.ajax({
                    type: "post",
                    url: "/Account/DelRole",
                    traditional: true,
                    data: { x: xe },
                    success: function (data) {
                        if (data == 1) {
                            alert("删除成功");
                            window.location.href = '/AdminArea/Account/RoleManage';
                        }
                        else {
                            alert("系统错误，删除失败！");
                            window.location.href = '/AdminArea/Account/RoleManage';
                        }
                    }
                })
            }
        }
    </script>
</head>
<body style="width: 95%; margin-left: 2%; background: #FFFFFF url('../../../images/manage/bodyBg.jpg') no-repeat right;">
    <div class="SY201112_TB0_title" style="margin-bottom:10px;"><span>角色管理</span></div>
    <form action="/AdminArea/Account/RoleManage">
        <div style="margin-bottom:10px;">
            角色名称：<input type="text" id="RoleName" name="RoleName" />
            <input type="submit" value="搜 索" class="btn btn-primary btn-sm" />
            <a onclick="deleteall()" class="btn btn-primary btn-sm">删 除</a>
            <a href="RoleModal/0" class="btn btn-primary btn-sm">添加角色</a>
        </div>
    </form>
    <!-- search end -->
    <table id="example" class="table table-striped table-bordered" style="overflow: hidden;">
        <thead>
            <tr class="tableTit">
                <th><input onclick="checkAll()" id="Checkbox1" name="checkbox0" type="checkbox" /></th>
                <th>角色组</th>
                <th>角色说明</th>
                <th>修改</th>
            </tr>
        </thead>
        <tbody>
            @{
                foreach (var item in Model as List<GeneModel.WF_Role>)
                {
                    <tr>
                        <td style="width: 15px;" class="del">
                            <input name="checkbox" value="@item.Id" type="checkbox" />
                        </td>
                        <td>@item.RoleName</td>
                        <td>@item.Introduce</td>
                        <td>
                            <a href="UpdateRoot?id=@item.Id">权限管理</a>&nbsp;
                            <a href="UpdateRoot?id=@item.Id" data-toggle="modal" data-target="#Modal">权限管理test</a>
                            <a href="RoleModal/@item.Id" data-toggle="modal" data-target="#myModal">修改</a>&nbsp;
                            <a href="DelRole?id=@item.Id">删除</a>&nbsp;
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

            </div>
        </div>
    </div>
</body>
</html>
<div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
        </div>
    </div>
</div>

<script type="text/javascript">
    //DataTable分页插件
    $(function () {
        $('#example').DataTable({
            "pagingType": "full_numbers",
            "sLoadingRecords": "正在加载数据...",
            "sZeroRecords": "暂无数据",
            "bPaginate": true, //翻页功能
            "bLengthChange": false, //改变每页显示数据数量
            "bFilter": false, //过滤功能
            "bSort": false, //排序功能
            "bInfo": false,//页脚信息
            "bAutoWidth": true,//自动宽度
            "language": {
                "processing": "玩命加载中...",
                "lengthMenu": "显示 _MENU_ 项结果",
                "zeroRecords": "没有匹配结果",
                "info": "",
                "infoEmpty": "",
                "infoFiltered": "(由 _MAX_ 项结果过滤)",
                "infoPostFix": "",
                "url": "",
                "search": "搜&nbsp索：",
                "paginate": {
                    "first": "首页",
                    "previous": "上一页",
                    "next": "下一页",
                    "last": "末页"
                }
            }
        });
    })
</script>
